language: go

# TODO: support building/testing with both golang and gccgo?
go:
  - 1.4

before_install:
  - sudo apt-add-repository -y ppa:ubuntu-lxc/buildd-backports
  - sudo apt-add-repository -y ppa:ubuntu-lxc/lxc-stable
  - sudo apt-get update
  - sudo apt-get install -y libssl1.0.0 libssl-dev libssl-doc curl libcurl3 libcurl3-gnutls libcurl4-openssl-dev gettext
  - sudo apt-get install -y acl lxc lxc-dev sqlite3 jq busybox-static protobuf-compiler

install:
  - make tests

script: "sudo -E env PATH=$PATH test/scmtest"
notifications:
  webhooks: https://linuxcontainers.org/webhook-lxcbot/
