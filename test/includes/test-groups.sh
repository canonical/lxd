# Test groups
#
# Each entry in those `test_group` arrays correspond to the name of an
# individual test function (without the `test_` prefix that is automatically
# added by `main.sh` when executing the test).
#
readonly test_group_cluster=(
    "clustering_enable"
    "clustering_edit_configuration"
    "clustering_membership"
    "clustering_containers"
    "clustering_network"
    "clustering_profiles"
    "clustering_projects_force_delete"
    "clustering_join_api"
    "clustering_shutdown_nodes"
    "clustering_projects"
    "clustering_metrics"
    "clustering_update_cert"
    "clustering_update_cert_reversion"
    "clustering_update_cert_token"
    "clustering_address"
    "clustering_dns"
    "clustering_fan"
    "clustering_recover"
    "clustering_ha"
    "clustering_handover"
    "clustering_rebalance"
    "clustering_rebalance_remove_leader"
    "clustering_remove_raft_node"
    "clustering_roles"
    "clustering_failure_domains"
    "clustering_evacuation"
    "clustering_evacuation_restore_operations"
    "clustering_move"
    "clustering_remove_members"
    "clustering_autotarget"
    "clustering_upgrade"
    "clustering_upgrade_large"
    "clustering_downgrade"
    "clustering_groups"
    "clustering_events"
    "clustering_uuid"
    "clustering_trust_add"
    "clustering_waitready"
    "clustering_heal_networks_stop"
    "clustering_placement_groups"
    "clustering_force_removal"
)

readonly test_group_cluster_storage=(
    "clustering_image_refresh"
    "clustering_image_replication"
    "clustering_live_migration"
    "clustering_publish"
    "clustering_recovery"
    "clustering_storage"
    "clustering_storage_single_node"
)

readonly test_group_instance=(
    "cloud_init"
    "concurrent"  # Disabled as flaky.
    "concurrent_exec"
    "console"
    "console_vm"
    "container_devices_gpu"
    "container_devices_none"
    "container_devices_proxy"
    "container_devices_tpm"
    "container_devices_unix"
    "container_metadata"
    "container_snapshot_config"
    "container_syscall_interception"
    "devlxd"
    "devlxd_vm"
    "exec"
    "exec_exit_code"
    "lxd_benchmark_basic"
    "vm_empty"
    "vm_pcie_bus"
)

readonly test_group_image=(
    "image_acl"
    "image_auto_update"
    "image_expiry"
    "image_import_dir"
    "image_import_existing_alias"
    "image_list_all_aliases"
    "image_list_remotes"
    "image_prefer_cached"
    "image_refresh"
    "images_public"
    "projects_images"
    "projects_images_default"
)

readonly test_group_network=(
    "container_devices_infiniband_physical"
    "container_devices_infiniband_sriov"
    "container_devices_nic_bridged"
    "container_devices_nic_bridged_acl"
    "container_devices_nic_bridged_filtering"
    "container_devices_nic_bridged_vlan"
    "container_devices_nic_ipvlan"
    "container_devices_nic_macvlan"
    "container_devices_nic_p2p"
    "container_devices_nic_physical"
    "container_devices_nic_routed"
    "container_devices_nic_sriov"
    "projects_network"
    "network"
    "network_acl"
    "network_forward"
    "network_zone"
    "network_ovn"
)

readonly test_group_standalone=(
    "alias"
    "apparmor"
    "authorization"
    "basic_usage"
    "basic_version"
    "certificate_edit"
    "certificate_project_restrictions"
    "completions"
    "config_edit"
    "config_edit_container_snapshot_pool_config"
    "config_profiles"
    "database_no_disk_space"
    "database_restore"
    "duplicate_detection"
    "fdleak"
    "filtering"
    "get_operations"
    "kernel_limits"
    "lxd_user"
    "metrics"
    "oidc"
    "pki"
    "profiles_project_default"
    "profiles_project_profiles"
    "profiles_project_images"
    "profiles_project_images_profiles"
    "projects_before_init"
    "projects_default"
    "projects_profiles"
    "projects_profiles_default"
    "projects_usage"
    "projects_yaml"
    "property"
    "query"
    "remote_admin"
    "remote_url"
    "remote_url_with_token"
    "remote_usage"
    "resources"
    "resources_bcache"
    "security"
    "security_protection"
    "server_config"
    "server_info"
    "shutdown"
    "sql"
    "syslog_socket"
    "template"
    "tls_restrictions"
    "tls_version"
    "waitready"
    "warnings"
)

readonly test_group_snap=(
    "snap_apparmor"
    "snap_basic_usage_vm"
    "snap_lxd_user"
    "snap_storage_volume_attach_vm"
    "snap_vm_empty"
)

readonly test_group_standalone_storage=(
    "backup_import"
    "backup_export"
    "backup_rename"
    "backup_volume_export"
    "backup_export_import_instance_only"
    "backup_metadata"
    "backup_volume_rename_delete"
    "backup_instance_uuid"
    "backup_volume_expiry"
    "backup_export_import_recover"
    "bucket_recover"
    "container_devices_disk"
    "container_devices_disk_restricted"
    "container_move"
    "container_recover"
    "container_local_cross_pool_handling"
    "devlxd_volume_management"
    "devlxd_volume_management_snapshots"
    "incremental_copy"
    "filemanip"
    "filemanip_req_content_type"
    "fuidshift"
    "idmap"
    "migration"
    "init_auto"
    "init_dump"
    "init_interactive"
    "init_preseed"
    "projects_copy"
    "projects_crud"
    "projects_containers"
    "projects_snapshots"
    "projects_storage"
    "projects_backups"
    "projects_limits"
    "projects_restrictions"
    "projects_images_volume"
    "projects_backups_volume"
    "projects_force_delete"
    "snapshots"
    "snapshot_restore"
    "snapshot_expiry"
    "snapshot_schedule"
    "snapshot_volume_db_recovery"
    "snapshot_fail"
    "snapshot_multi_volume"
    "storage_volume_recover"
    "storage_volume_recover_by_container"
    "storage"
    "storage_volume_snapshots"
    "storage_local_volume_handling"
    "storage_profiles"
    "storage_volume_attach"
    "storage_driver_btrfs"
    "storage_driver_ceph"
    "storage_driver_cephfs"
    "storage_driver_dir"
    "storage_driver_zfs"
    "storage_driver_pure"
    "storage_buckets"
    "storage_volume_import"
    "storage_volume_initial_config"
)

# shellcheck disable=SC2034
readonly test_group_all=(
    "${test_group_cluster[@]}"
    "${test_group_cluster_storage[@]}"
    "${test_group_instance[@]}"
    "${test_group_image[@]}"
    "${test_group_network[@]}"
    "${test_group_snap[@]}"
    "${test_group_standalone[@]}"
    "${test_group_standalone_storage[@]}"
)
